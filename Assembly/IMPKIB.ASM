;VERY IMPORTANT PROGRAM
;WHILE PRINTING A STRING THE DS MUST BE SET TO DATA SEGMENT
TITLE IMPKEYB
BIODATA SEGMENT AT 40H
ORG 17H
KBSTATE DB ?
BIODATA ENDS

CODESG SEGMENT PARA
ASSUME CS:CODESG,DS:BIODATA
ORG 100H
MAIN:
JMP BEGIN
MSG DB 'MADHUR$'
BEGIN:
MOV AX,BIODATA
MOV DS,AX      ;DS CONTAINS ADDRESS OF KEYBOARD BYTE NOT DATA SEGMENT
MOV AL,KBSTATE       ;MOVE THE VALUE OF KEYBOARD BYTE IN AL
TEST AL,00000011B     ;TEST WHETHER SHIFT IS PRESSED
JZ QUIT                ;IF NO QUIT
MOV AH,09H              
MOV DX,OFFSET MSG
MOV CX,ES
MOV DS,CX             ;MOVES THE ADDRESS OF DATA SEGMENT IN DS
INT 21H                 ;WILL NOT WORK IF DS CONTAINED 40H    
QUIT:
MOV AH,4CH
INT 21H
CODESG ENDS
END MAIN